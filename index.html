<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="styles.css">
  <title>세련된 패들렛 기능 테스트</title>
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.min.js"></script>
  <link rel="stylesheet" href="https://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
  <style>
    body {
      font-family: Arial, sans-serif;
      background: linear-gradient(135deg, #ff9a9e, #fad0c4, #f0f0f0);
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      margin: 0;
    }

    .board-container {
      width: 90%;
      max-width: 700px;
      background-color: #ffffff;
      border-radius: 10px;
      padding: 20px;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    }

    .input-container {
      display: flex;
      flex-direction: column;
      margin-bottom: 20px;
    }

    textarea {
      width: 100%;
      height: 80px;
      padding: 10px;
      margin-bottom: 10px;
      border: 1px solid #ccc;
      border-radius: 5px;
    }

    .buttons {
      display: flex;
      gap: 10px;
    }

    button {
      padding: 10px;
      border: none;
      background-color: #007bff;
      color: white;
      cursor: pointer;
      border-radius: 5px;
      transition: background-color 0.3s ease;
    }

    button:hover {
      background-color: #0056b3;
    }

    #resetButton {
      background-color: #dc3545;
    }

    #resetButton:hover {
      background-color: #c82333;
    }

    .board {
      display: flex;
      flex-wrap: wrap;
      gap: 15px;
      min-height: 300px;
      background-color: #f9f9f9;
      padding: 10px;
      border-radius: 10px;
      box-shadow: inset 0 2px 5px rgba(0, 0, 0, 0.1);
      position: relative;
    }

    .note {
      background-color: #ffeb3b;
      padding: 15px;
      border-radius: 5px;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      min-width: 120px;
      max-width: 200px;
      word-wrap: break-word;
      cursor: grab;
      position: absolute;
      transform: rotate(-2deg);
      resize: none;
      overflow: auto;
    }

    .note::before {
      content: "";
      position: absolute;
      top: 0;
      right: 0;
      width: 20px;
      height: 20px;
      background-color: rgba(255, 255, 255, 0.5);
      clip-path: polygon(100% 0, 0 0, 100% 100%);
      box-shadow: 0 0 5px rgba(0, 0, 0, 0.1);
    }

    .note:hover {
      cursor: nwse-resize;
    }

    .note-buttons {
      position: absolute;
      top: 5px;
      right: 5px;
      display: flex;
      gap: 5px;
    }

    .note-button {
      background-color: #fff;
      border: none;
      cursor: pointer;
      font-size: 12px;
      padding: 2px 5px;
      border-radius: 3px;
      box-shadow: 0 1px 3px rgba(0, 0, 0, 0.2);
    }

    .note-button:hover {
      background-color: #f0f0f0;
    }
  </style>
</head>
<body>
  <div class="board-container">
    <h1>포스트잇 메모 보드</h1>
    <div class="input-container">
      <textarea id="noteInput" placeholder="새 메모를 입력하세요..."></textarea>
      <div class="buttons">
        <button id="addNoteButton">메모 추가</button>
        <button id="resetButton">리셋</button>
      </div>
    </div>
    <div id="board" class="board"></div>
  </div>
  <script>
    document.addEventListener("DOMContentLoaded", () => {
      const addNoteButton = document.getElementById("addNoteButton");
      const noteInput = document.getElementById("noteInput");
      const board = document.getElementById("board");
      const resetButton = document.getElementById("resetButton");

      // 메모 불러오기
      loadNotes();

      // 메모 추가 버튼 클릭 시
      addNoteButton.addEventListener("click", () => {
        addNoteFromInput();
      });

      // Enter 키 입력 시 메모 추가
      noteInput.addEventListener("keydown", (e) => {
        if (e.key === "Enter" && !e.shiftKey) {
          e.preventDefault();
          addNoteFromInput();
        }
      });

      // 리셋 버튼 클릭 시
      resetButton.addEventListener("click", () => {
        if (confirm("모든 메모를 삭제하시겠습니까?")) {
          board.innerHTML = "";
          saveNotes(); // 빈 상태로 저장
        }
      });

      // 메모 추가 함수
      function addNoteFromInput() {
        const noteContent = noteInput.value.trim();
        if (noteContent === "") {
          alert("메모 내용을 입력하세요!");
          return;
        }
        addNote(noteContent);
        noteInput.value = ""; // 입력란 초기화
        saveNotes(); // 메모 저장
      }

      function addNote(content, position = { top: 50, left: 50 }, size = { width: 150, height: 150 }) {
        const note = document.createElement("div");
        note.classList.add("note");
        note.textContent = content;
        note.style.top = `${position.top}px`;
        note.style.left = `${position.left}px`;
        note.style.width = `${size.width}px`;
        note.style.height = `${size.height}px`;

        const noteButtons = document.createElement("div");
        noteButtons.classList.add("note-buttons");

        const deleteButton = document.createElement("button");
        deleteButton.classList.add("note-button");
        deleteButton.textContent = "✕";
        deleteButton.addEventListener("click", () => {
          note.remove();
          saveNotes();
        });

        const editButton = document.createElement("button");
        editButton.classList.add("note-button");
        editButton.textContent = "✎";
        editButton.addEventListener("click", () => {
          const newContent = prompt("메모 내용을 수정하세요:", note.textContent);
          if (newContent !== null) {
            note.textContent = newContent;
            note.appendChild(noteButtons);
            saveNotes();
          }
        });

        noteButtons.appendChild(editButton);
        noteButtons.appendChild(deleteButton);
        note.appendChild(noteButtons);

        $(note).draggable({
          containment: ".board",
          stop: function () {
            saveNotes();
          }
        }).resizable({
          handles: "all",
          stop: function () {
            saveNotes();
          }
        });

        board.appendChild(note);
      }

      // 메모 저장 함수
      function saveNotes() {
        const notes = [];
        document.querySelectorAll(".note").forEach(note => {
          notes.push({
            content: note.textContent,
            position: {
              top: note.offsetTop,
              left: note.offsetLeft
            },
            size: {
              width: note.offsetWidth,
              height: note.offsetHeight
            }
          });
        });
        localStorage.setItem("notes", JSON.stringify(notes));
      }

      // 메모 불러오기 함수
      function loadNotes() {
        const notes = JSON.parse(localStorage.getItem("notes")) || [];
        notes.forEach(note => {
          addNote(note.content, note.position, note.size);
        });
      }
    });
  </script>
</body>
</html>